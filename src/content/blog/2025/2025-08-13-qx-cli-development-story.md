---
title: "なぜ今、AI時代にCLIツールを作ったのか - Qx開発の舞台裏"
pubDate: 2025-08-13
description: "OpenAI APIと対話するCLIツール『Qx』の開発背景。o3-search-mcpと同じ課題意識から生まれた別アプローチ、そしてWeb検索機能とモデルサイズの意外な関係性について。"
author: "arstella-team"
tags: ["AI", "CLI", "OpenAI", "開発ツール", "開発効率化", "コーディングエージェント"]
category: "開発ツール"
slug: "qx-cli-development-story"
---

## きっかけは一つのフラストレーション

皆さんは、ターミナルで作業中にこんな経験はありませんか？

「このエラーメッセージ、どう解決すればいいんだろう...」

ブラウザを開いて、エラーメッセージをコピペして、Stack Overflowを開いて、GitHub Issuesを確認して、公式ドキュメントを読んで...気づけば30分経っていた。
しかも、結局解決策が見つからない。

そんな日常的なフラストレーションから、Qxは生まれました。

## 既存ツールの課題：なぜ新しいCLIが必要だったのか

### ChatGPTやClaudeのWebUIの限界

確かに、ChatGPTやClaudeのWebインターフェースは素晴らしいです。
でも、開発者として日々ターミナルで作業していると、いくつかの課題が見えてきます。

- **コンテキストスイッチのコスト** - ターミナル → ブラウザ → ターミナルの往復は意外と疲れる
- **コピペ地獄** - エラーメッセージやコードを何度もコピペするのは非効率
- **最新情報へのアクセス** - LLMの知識カットオフ以降の情報は手動で補足する必要がある
- **自動化の難しさ** - WebUIはスクリプトやパイプラインに組み込めない

### 既存のCLIツールたちの物足りなさ

「でも、既にCLIツールはあるじゃないか」と思われるかもしれません。
確かに、GitHub Copilot CLIやsgpt、aicommitsなど、優れたツールは存在します。

しかし、これらのツールにも限界がありました。

- **Web検索機能の欠如** - 最新の技術情報やライブラリのアップデートを反映できない
- **単機能特化** - コミットメッセージ生成やコード補完など、特定の用途に限定される
- **推論能力の制限** - 複雑な技術的問題に対する深い分析が難しい
- **情報源の統合不足** - 複数のソースからの情報を統合的に扱えない

## 同じ課題、異なるアプローチ：o3-search-mcpとQx

### Claude Codeの検索能力問題

最近、Claude.aiがMCP（Model Context Protocol）サーバーのサポートを発表しました。
これを受けて、興味深いツールが登場しています。

[o3-search-mcp](https://github.com/o3-developers/o3-search-mcp)は、Claude Codeの検索能力の弱さを補完するために開発されたMCPツールです。
[Zennの記事](https://zenn.dev/yoshiko/articles/claude-code-with-o3)でも紹介されているように、開発者は「Claude Codeの検索があまり強くない」という課題に直面していました。
複雑なエラーや込み入った問題は、別途ChatGPTアプリでo3に聞いて、その回答をClaude Codeにコピペする。
そんな「情報運び屋」的な作業が日常になっていたのです。

o3-search-mcpは、この非効率な手動作業を解決するため、MCPを使ってClaude Codeから直接o3に質問できる仕組みを実現しました。

### 人間のためのインターフェースという別解

一方、Qxは同じ「AI時代の検索問題」に対して、異なるアプローチを取りました。

o3-search-mcpがClaude CodeとOpenAIのo3を繋ぐ「橋」だとすれば、Qxは「人間が直接OpenAI APIと対話するツール」です。

両者に共通する機能は以下の通りです。
- LLMが自律的にWeb検索を実行
- 検索コンテキストサイズの調整
- 推論努力レベルの設定

しかし、決定的な違いがあります。
o3-search-mcpはAIエージェント（Claude Code）のための拡張機能。
Qxは人間が直接操作するCLIツール。

この違いは重要です。
なぜなら、開発者は常にAIエージェント経由で作業するわけではないからです。
ターミナルから直接、素早く情報を得たい場面も多々あります。

そこで生まれたのが、Qxです。
o3-search-mcpと同じ問題意識を共有しながら、人間が使いやすいCLIツールとして設計しました。

## AIエージェント時代におけるCLIツールの重要性

### CLIツールのルネサンス

AIの時代だからこそ、CLIツールの価値が再評価されています。
なぜでしょうか？

**1. AIエージェントとの相互運用性**

現代の開発では、人間とAIエージェントが協働することが増えています。

```bash
# Claude CodeやGitHub Copilot Workspaceから呼び出し可能
qx "このエラーの解決方法を教えて" | claude-code apply
```

CLIツールは、人間もAIエージェントも同じように使える「共通言語」となります。

**2. パイプラインとの親和性**

Unix哲学「一つのことをうまくやる」は、AI時代でも健在です。

```bash
# エラーログを分析してレポート生成
cat error.log | qx "エラーの原因を分析" > analysis.md
```

**3. 自動化の容易さ**

CI/CDパイプラインやスクリプトに組み込めることで、開発プロセスの自動化が進みます。

```yaml
# GitHub Actionsでの使用例
- name: Analyze test failures
  run: |
    qx "テスト失敗の原因を分析" --input test-results.json
```

### 人間中心設計の重要性

AIツールが増える中で、忘れてはいけないのは「人間が使いやすいこと」です。

Qxの設計では、以下を重視しました。

- **シンプルなコマンド体系** - `qx "質問"` だけで使える
- **賢いデフォルト設定** - ほとんどの場合、オプション指定は不要
- **直感的なフィードバック** - 何が起きているか分かりやすく表示
- **エラー時の親切な対応** - 問題が起きても次のアクションが分かる

## まとめ：開発者の日常を変える小さな革命

Qxは、大げさな革命を起こそうとしているわけではありません。

ただ、開発者が日々感じる小さなストレスを、一つずつ解消したいと思っています。

- エラーメッセージに遭遇したとき
- 新しいライブラリの使い方を調べるとき
- ニッチな技術課題に直面したとき

そんなときに、ターミナルから離れることなく、素早く答えを得られる。
それがQxの目指す世界です。

「LLMの自律的な検索」というアイデアを、人間が日常的に使えるツールとして実現しました。

AIエージェント時代だからこそ、人間とAIが同じツールを共有し、協働できる環境が重要になります。
CLIツールは、その架け橋となる存在です。

開発の現場で、Qxが皆さんの良きパートナーとなることを願っています。

## 技術的な発見：Web検索とモデルサイズの意外な関係

Qxを開発し、実際に使い込んでいく中で、興味深い発見がありました。

### Web検索機能は「共通インフラ」だった

OpenAIのモデル（gpt-5、gpt-5-mini、gpt-5-nano）を比較テストした結果、予想外の事実が判明しました。

**Web検索機能自体は、モデルサイズに関係なく同じ挙動をする。**

つまり、以下の点が共通しています。
- すべてのモデルが同じWeb検索エンジンを使用
- 検索クエリの生成も同じメカニズム
- 取得する情報源も同一

これはOpenAI APIの設計思想を反映しています。
Web検索は「ツール」として実装されており、モデル本体とは独立した共通インフラなのです。

### では、何が違うのか？

違いは「検索結果をどう料理するか」にありました。

**小さいモデル（gpt-5-nano）の場合：**
```
Q: 現在の日本の総理大臣は誰ですか？
A: 石破茂氏です。（ソース: nhk.or.jp, kantei.go.jp）
```
簡潔で必要十分な回答。

**大きいモデル（gpt-5）の場合：**
```
Q: 現在の日本の総理大臣は誰ですか？
A: 2025年8月13日現在の日本の内閣総理大臣は、石破茂（いしば しげる）氏です。
   2024年10月1日に就任し、第103代内閣総理大臣として...
   （複数の公式ソースを統合した詳細な説明）
```
文脈を理解し、複数の情報源を統合した包括的な回答。

### 実用的な示唆

この発見から得られた実用的な洞察をまとめます。

1. **速度重視なら小さいモデル**
   - Web検索自体は同じなので、基本的な事実確認には十分
   - レスポンスが速い（11秒 vs 14秒）
   - コストも低い

2. **品質重視なら大きいモデル**
   - 複数の情報源を統合する能力が高い
   - ニュアンスや文脈を理解した要約
   - 信頼性の判断がより正確

3. **用途に応じた使い分けが重要**
   - 単純な事実確認 → gpt-5-nano
   - 複雑な調査・分析 → gpt-5
   - バランス重視 → gpt-5-mini

### CLIツールだからこその利点

この特性を活かせるのも、CLIツールならではです。

```bash
# 速度重視の単純な質問
qx "今日の天気は？" --model gpt-5-nano

# 詳細な技術調査
qx "React 19の新機能を分析して" --model gpt-5

# スクリプトで使い分け
if [ "$QUICK_MODE" = true ]; then
  MODEL="gpt-5-nano"
else
  MODEL="gpt-5"
fi
qx "$QUERY" --model $MODEL
```

モデルをコマンドラインオプションで切り替えられるQxの設計が、この発見を実用的な価値に変えています。

*Qxはオープンソースプロジェクトです。
ぜひ、皆さんのフィードバックや貢献をお待ちしています。
*